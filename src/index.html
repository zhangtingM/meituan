<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="./css/index.css">
    <script src="./js/libs/flexible.js"></script>
    <link rel="stylesheet" href="./iconfont/iconfont.css">
    <link rel="stylesheet" href="./font/iconfont.css">
    <link rel="stylesheet" href="./css/swiper-4.1.6.min.css">
</head>

<body>
    <div class="wrap">
        <header>
            <span class="H_left">
                <b>北京</b>
                <i class="iconfont icon-angle-down"></i>
            </span>
            <p>
                <i class="iconfont icon-search"></i>
                <input type="text" placeholder="输入商家/品类/商圈">
            </p>
            <span class="H_right">
                <i class="iconfont icon-account"></i>
                <b>我的</b>
            </span>
        </header>
        <section>
            <div class="up"></div>
            <div class="banner">
                <img src="./img/download_banner.png" alt="">
            </div>
            <div class="swiper-container">
                <div class="swiper-wrapper">
                    <div class="swiper-slide">
                        <!-- <dl>
                            <dt><i class="iconfont icon-haofangtuo400iconfont2meishi"></i></dt>
                            <dd>美食</dd>
                        </dl>
                        <dl>
                            <dt><i class="iconfont icon-taobaodianying"></i></dt>
                            <dd>猫眼电影</dd>
                        </dl>
                        <dl>
                            <dt><i class="iconfont icon-jiudian"></i></dt>
                            <dd>酒店</dd>
                        </dl>
                        <dl>
                            <dt><i class="iconfont icon-xiuxianyule"></i></dt>
                            <dd>休闲娱乐</dd>
                        </dl>
                        <dl>
                            <dt><i class="iconfont icon-icon-test"></i></dt>
                            <dd>外卖</dd>
                        </dl>
                        <dl>
                            <dt><i class="iconfont icon-ktv"></i></dt>
                            <dd>KTV</dd>
                        </dl>
                        <dl>
                            <dt><i class="iconfont icon-zhoubianyou"></i></dt>
                            <dd>周边游</dd>
                        </dl>
                        <dl>
                            <dt><i class="iconfont icon-liren"></i></dt>
                            <dd>丽人</dd>
                        </dl>

                        <dl>
                            <dt><i class="iconfont icon-shutiao"></i></dt>
                            <dd>小吃快餐</dd>
                        </dl>

                        <dl>
                            <dt><i class="iconfont icon-huochepiao"></i></dt>
                            <dd>火车票</dd>
                        </dl> -->
                    </div>
                    <div class="swiper-slide">2</div>
                </div>
                <div class="swiper-pagination"></div>
            </div>
            <div class="bottom">
                <h3>猜你喜欢</h3>
                <div class="Bot_List"></div>
                <!-- <dl>
                    <dt><img src="//p1.meituan.net/200.0/deal/ebee186962d71b90044b46422df4faa540449.jpg@114_0_381_381a%7C267h_267w_2e_90Q" alt=""></dt>
                    <dd>
                        <div class="B_top">
                            <p>全聚德</p>
                            <p>[东城区]精品烤鸭3-4人餐1份</p>
                        </div>
                        <div class="B_bot">
                            <p><b>398元</b><span>门市价:498元</span></p>
                            <p>已售3311</p>
                        </div>
                    </dd>
                </dl>
                <dl>
                    <dt><img src="//p1.meituan.net/200.0/deal/436170046b8b01267a14917173ee4e2e38042.jpg@100_0_400_400a%7C267h_267w_2e_90Q" alt=""></dt>
                    <dd>
                        <div class="B_top">
                            <p>华莱士</p>
                            <p>[2店通用]鸡腿堡+可乐</p>
                        </div>
                        <div class="B_bot">
                            <p><b>13元</b><span>门市价:31元</span></p>
                            <p>已售3567</p>
                        </div>
                    </dd>
                </dl>
                <dl>
                    <dt><img src="//p0.meituan.net/200.0/deal/0be5db2a43e4772eb64d219630fe92f046534.jpg@75_0_451_451a%7C267h_267w_2e_90Q" alt=""></dt>
                    <dd>
                        <div class="B_top">
                            <p>华莱士</p>
                            <p>[2店通用]鸡腿堡+可乐</p>
                        </div>
                        <div class="B_bot">
                            <p><b>13元</b><span>门市价:31元</span></p>
                            <p>已售3567</p>
                        </div>
                    </dd>
                </dl> -->
                <!-- <dl>
                    <dt><img src="//p1.meituan.net/200.0/deal/9e395b77ccc166e325c64fb2507c33ea49131.jpg@0_137_513_513a%7C267h_267w_2e_90Q" alt=""></dt>
                    <dd>
                        <div class="B_top">
                            <p>亲爱的锅包</p>
                            <p>[2店通用]锅包肉1份，提供免费wifi</p>
                        </div>
                        <div class="B_bot">
                            <p><b>25.9元</b><span>门市价:28元</span></p>
                            <p>已售697</p>
                        </div>
                    </dd>
                </dl> -->

            </div>
        </section>

    </div>
    <script src="./js/libs/swiper-4.1.6.min.js"></script>
    <script src="./js/libs/jquery-1.9.1.js"></script>
    <script>
        $.ajax({
            url: '/api/list',
            // data: 'json',
            success: function(res) {
                render(res)
            }
        })

        function render(data) {
            var data = JSON.parse(data);
            if (data.code === 0) {
                var html = '';
                data.msg.forEach(function(item) {
                    html += ` <dl>
                    <dt><img src="${item.img}" alt=""></dt>
                    <dd>
                        <div class="B_top">
                            <p>${item.tittle}</p>
                            <p>${item.address}</p>
                        </div>
                        <div class="B_bot">
                            <p><b>${item.Price}</b><span>门市价:28元</span></p>
                            <p>${item.Sold}</p>
                        </div>
                    </dd>
                </dl>`
                })
                $('.Bot_List').html(html)

            }
        }

        //swiper
        var swiper = new Swiper('.swiper-container', {
            pagination: {
                el: '.swiper-pagination',
            },
            on: {
                slideChange: function() {
                    var index = this.activeIndex //切换结束时，告诉我现在是第几个slide
                    $.ajax({
                        url: '/api/swiper?index=' + index,
                        success: function(res) {
                            // console.log(res)
                            renders(JSON.parse(res))
                        }
                    })

                },
            }
        })
        $.ajax({
            url: '/api/swiper?index=' + 0,
            success: function(res) {
                // console.log(res)
                renders(JSON.parse(res))
            }
        })

        function renders(data) {
            console.log(data)
            if (data.code === 0) {
                var list = '';
                data.msg.title.forEach(function(items) {
                    list += ` <dl>
                            <dt><i class="iconfont ${items.iconClass}"></i></dt>
                            <dd>${items.tit}</dd>
                        </dl>`
                })
                $('.swiper-slide').html(list)

            }
        }
    </script>
</body>

</html>